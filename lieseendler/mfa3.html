<!DOCTYPE html>
<html>
<head>
    <title>Liese Endler | Download Media</title>
    <meta charset="UTF-8">
    <link type="text/css" rel="stylesheet" href="/css/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="/css/style.css">
</head>
<body style="background-color: #ddd;">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 map">
                <div class="bg-image">
                    <img src="/img/location1.jpg">
                    <div class="all-icons">
                        <aside id="zero" class="zero icon" draggable="true" onclick="move('.zero')"></aside>
                        <aside id="archivist" class="archivist icon" draggable="true" onclick="move('.archivist')"></aside>
                        <aside id="compiler" class="compiler icon" draggable="true" onclick="move('.compiler')"></aside>
                        <aside id="troublemaker" class="troublemaker icon" draggable="true" onclick="move('.troublemaker')"></aside>
                    </div>
                </div>
            </div>
        </div>
        <div class="row dl-link">
            <a href="/assets/masterarbeit.zip">Hier herunterladen</a>
        </div>
    </div>
    <iframe width="1" height="1" frameborder="0" src="/img/1.gif"></iframe>
    <script src="/js/jquery-3.2.1.min.js"></script>
    <script src="/js/jquery-ui.min.js"></script>
    <script>
    
        window.onload = function() {
            $('<a href="/img/1.gif" target="blank"></a>')[0].click();
        }
    
        $('.icon').draggable({ containment: ".bg-image" });
        var zero = document.getElementById('zero'); 
        var archivist = document.getElementById('archivist');
        var compiler = document.getElementById('compiler');
        var troublemaker = document.getElementById('troublemaker');
        var item = null;
        document.body.addEventListener('dragstart', function(e){
            item = e.target;
            var style = window.getComputedStyle(item, null);
            e.dataTransfer.setData('text/plain', (parseInt(style.getPropertyValue("left"),10) - e.clientX) + ',' + (parseInt(style.getPropertyValue("top"),10) - e.clientY));
            }, false);
        document.body.addEventListener('dragover', function(e){
            e.preventDefault(); 
            return false; 
            }, false); 
        document.body.addEventListener('drop', function(e){
            var offset = e.dataTransfer.getData("text/plain").split(',');
            item.style.left = (e.clientX + parseInt(offset[0],10)) + 'px';
            item.style.top = (e.clientY + parseInt(offset[1],10)) + 'px';
            e.preventDefault();
            return false;
            }, false);
            
            function makeNewPosition(){

                // Get viewport dimensions (remove the dimension of the div)
                var h = $(window).height() - 40;
                var w = $(window).width() - 40;
                var nh = Math.floor(Math.random() * h);
                var nw = Math.floor(Math.random() * w);
                return [nh,nw];   
            }

            function move(knstfgr){
                var newq = makeNewPosition();
                $(knstfgr).animate({ top: newq[0], left: newq[1] });
            }
    </script>
</body>
</html>